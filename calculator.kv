#:import utils kivy.utils
#:import Factory kivy.factory.Factory
<Calculator>
	BoxLayout:
		orientation: "vertical"
		size: root.width, root.height

        BoxLayout:
            size_hint: (1,.1)
            Button:
                text: "Calculator"
                on_press: root.manager.current = 'Calculator'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Estimate \n Income"
                on_press: root.manager.current = 'estimate'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Exchange"
                on_press: root.manager.current = 'Exchange'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Date \nCalculator"
                on_press: root.manager.current = 'date'
                background_color: (74/255, 201/255, 247/255, 1)
		
		TextInput:
			id: calc_input
			text: "0"
			halign: "right"
			font_size: 65
            disabled: True
			size_hint: (1, .15)
		GridLayout:
			cols: 4
			rows: 5

			# Row 5 
			Button:
				font_size: 32
				text: "%"
                background_color: (0, 1, 0)
                on_press: root.percent()

			Button:
				font_size: 32
				text: "C"
                background_color: (0, 1, 0)
				on_press: root.clear()

			Button:
				id: clear
				font_size: 32
				text: u"\u00AB"
                background_color: (0, 1, 0)
				on_press: root.remove()
				
			Button:
				font_size: 32
				text: "/"
				on_press: root.math_sign("/")
                background_color: (255/255, 149/255, 0, .95)

			# Row 4 
			Button:
				font_size: 32
				text: "7"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(7)

			Button:
				font_size: 32
				text: "8"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(8)

			Button:
				font_size: 32
				text: "9"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(9)

			Button:
				font_size: 32
				text: "x"
				on_press: root.math_sign("*")
                background_color: (255/255, 149/255, 0, .95)

			# Row 3 
			Button:
				font_size: 32
				text: "4"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(4)

			Button:
				font_size: 32
				text: "5"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(5)

			Button:
				font_size: 32
				text: "6"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(6)

			Button:
				font_size: 32
				text: "-"
				on_press: root.math_sign("-")
                background_color: (255/255, 149/255, 0, .95)

			# Row 2
			Button:
				font_size: 32
				text: "1"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(1)

			Button:
				font_size: 32
				text: "2"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(2)

			Button:
				font_size: 32
				text: "3"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(3)

			Button:
				font_size: 32
				text: "+"
				on_press: root.math_sign("+")
                background_color: (255/255, 149/255, 0, .95)

			# Row 1
			Button:
				font_size: 32
				text: "+/-"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.pos_neg()
                

			Button:
				font_size: 32
				text: "0"
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.button_press(0)

			Button:
				font_size: 32
				text: "."
				background_color: utils.get_color_from_hex('#505050')
				on_press: root.dot()

			Button:
				font_size: 32
				text: "="
				on_press: root.equals()
                background_color: (255/255, 149/255, 0, .95)

<Tax@SpinnerOption>:
    background_color: 124/255, 159/255, 214/255, 1  
    background_down: ''

<MyPopup@Popup>
    fed_tax: fedTax_label
    state_tax: stateTax_label
    fica_tax: FicaTax_label

    on_open: root.SetData()
    id: pop_up
    auto_dismiss: False
    size_hint: 0.6, 0.7
    pos_hint: {"center_x": .5, "center_y": .5}
    title: "Summary"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text:'Your estimated net income yearly:'
            font_size: 32
        Label:
            id: pop_yearly
            text:'$ 0'
            font_size: 32
        Label:
            color:(3/255,236/255,252/255,1)
            text: '-------------------------------------------------------------------------------------------------------------'
        Label:
            text:'Your estimated net income Monthly:'
            font_size: 32
        Label:
            id: pop_monthly
            text:'$ 0'
            font_size: 32

        Label:
            color:(3/255,236/255,252/255,1)
            text: '-------------------------------------------------------------------------------------------------------------'      
        
        Label:
            text:'Your estimated net income semi monthly:'
            font_size: 32
        Label:
            id: pop_semi
            text:'$ 0'
            font_size: 32

        Label:
            color:(3/255,236/255,252/255,1)
            text: '-------------------------------------------------------------------------------------------------------------'
        Label:
            text:'The estimated federal tax that you will pay yearly:'
            font_size: 32
        Label:
            id: fedTax_label
            text:''
            font_size: 32

        Label:
            color:(3/255,236/255,252/255,1)
            text: '-------------------------------------------------------------------------------------------------------------'
        
        Label:
            text:'The estimated state tax that you will pay yearly:'
            font_size: 32
        Label:
            id: stateTax_label
            text:''
            font_size: 32

        Label:
            color:(3/255,236/255,252/255,1)
            text: '-------------------------------------------------------------------------------------------------------------'
            
        Label:
            text:'The estimated FICA that you will pay yearly:'
            font_size: 32
        Label:
            id: FicaTax_label
            text:''
            font_size: 32

        Button:
            text: "Close"
            font_size: 32
            pos_hint: {"center_x": .5, "center_y": .5}
            size_hint: 1,1
            on_release: root.dismiss()

<EstimateIncome> 
    # change the slider values on kivy 
    slide_text: slider_textInput
    # change the background color specifically for this view
    canvas.before:
        Color:
            rgba: 32/255, 61/255, 110/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation:'vertical'
        BoxLayout:
            size_hint: (1,.2)
            Button:
                text: "Calculator"
                on_press: root.manager.current = 'Calculator'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Estimate \n Income"
                on_press: root.manager.current = 'estimate'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Exchange"
                on_press: root.manager.current = 'Exchange'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Date \nCalculator"
                on_press: root.manager.current = 'date'
                background_color: (74/255, 201/255, 247/255, 1)
                
        GridLayout:
            cols: 3
            rows: 1
            size_hint: (1, .3)
            background_color: 124/255, 159/255, 214/255, 1
            Label:
                text:'Please Enter your income: '
            Slider:
                id:slider_input
                min:0
                max:999999
                step: 50
                orientation:"horizontal"
                on_value: root.slide_value(*args)
                value: 0
            TextInput:
                id: slider_textInput
                font_size: 110
                text: '$ '
                on_touch_up: root.text_input()

        Spinner:
            size_hint: (1, .5)
            id: state_input
            values: [ "AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UT","VA","VI","VT","WA","WI","WV","WY"]
            text:'Please Enter Which State you live in'
            background_color: 124/255, 159/255, 214/255, 1
            option_cls: Factory.get("Tax")
        Spinner:
            size_hint: (1, .5)
            id: FilingStatus_input
            values: [ "Single", "Married/RDP filing jointly"]
            text:'Please select your Filing Status'
            background_color: 124/255, 159/255, 214/255, 1
            option_cls: Factory.get("Tax")
        Spinner:
            size_hint: (1, .5)    
            id: year_input
            values:['2014', '2015', '2016', '2017', '2018', '2019', '2020']
            text:'Year'
            background_color: 124/255, 159/255, 214/255, 1
            option_cls: Factory.get("Tax")
        Spinner:
            size_hint: (1, .5)
            id: exemption_input
            values: ["1","2","3","4","5","6","7","8","9","10"]
            text:'Number of Exemption'
            background_color: 124/255, 159/255, 214/255, 1
            option_cls: Factory.get("Tax")
        Button:
            text:'Calculate'
            size_hint: (1,.3)
            background_color: (74/255, 247/255, 149/255, 1)
            option_cls: Factory.get("Tax")
            on_press: root.taxCalculate()
            on_release: Factory.MyPopup().open()


<MySpinnerOption@SpinnerOption>:
    background_color: [130/255, 178/255, 1, 1]   
    background_down: ''
<Exchange> 
    BoxLayout:
        orientation:'vertical'
        BoxLayout:
            size_hint: (1,.1)
            Button:
                text: "Calculator"
                on_press: root.manager.current = 'Calculator'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Estimate \n Income"
                on_press: root.manager.current = 'estimate'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Exchange"
                on_press: root.manager.current = 'Exchange'
                background_color: (74/255, 201/255, 247/255, 1)
            Button:
                text: "Date \nCalculator"
                on_press: root.manager.current = 'date'
                background_color: (74/255, 201/255, 247/255, 1)
        
        GridLayout:
            cols:3
            rows:1
            size_hint: (1, .2)
            Label:
                id: exchange_from
                text:'0'
                font_size: 100
                color: 0,0,0,1
            Label:
                text:'='
                color: 0,0,0,1
                font_size: 100
            Label:
                id: exchange_to
                text:'0'
                font_size: 100
                color: 0,0,0,1

        GridLayout:
			cols: 2
			rows: 2
            size_hint: (1, .2)
            
            Image:
                source: root.options.get(spinner_from.text)
            Image:
                source:root.options.get(spinner_to.text)
            Spinner:
                id: spinner_from
                values: root.options.keys()
                text:'USD'
                option_cls: Factory.get("MySpinnerOption")
                background_color: [130/255, 178/255, 1, 1]  
                # color: 1,0,0,1 this for the color font
            
            Spinner:
                id: spinner_to
                text:'EUR'
                values: root.options.keys() 
                option_cls: Factory.get("MySpinnerOption")
                background_color: [130/255, 178/255, 1, 1]  
                   
        
        BoxLayout: 
            orientation: 'horizontal'
            GridLayout:
                cols: 3
                rows: 4
                Button:
                    text:"7"
                    on_press: root.Calculate_exchange(7)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"8"
                    on_press: root.Calculate_exchange(8)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"9"
                    on_press: root.Calculate_exchange(9)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"4"
                    on_press: root.Calculate_exchange(4)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"5"
                    on_press: root.Calculate_exchange(5)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"6"
                    on_press: root.Calculate_exchange(6)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"1"
                    on_press: root.Calculate_exchange(1)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"2"
                    on_press: root.Calculate_exchange(2)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"3"
                    on_press: root.Calculate_exchange(3)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"."
                    on_press: root.dot()
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:"0"
                    on_press: root.Calculate_exchange(0)
                    background_color: utils.get_color_from_hex('#505050')
                Button:
                    text:""
                    background_color: utils.get_color_from_hex('#505050')
    
            GridLayout:
                cols: 1
                rows: 3
                size_hint:(.2,1)
                Button:
                    text:"BackSpace"
                    on_press: root.backSpace()
                    background_color: 0,0,1,1
                Button:
                    text:"Delete"
                    on_press: root.clear()
                    background_color: 1,0,0,1
                Button:
                    text:"Switch"
                    on_press: root.switch()
                    background_color: 0,1,0,1
            
<DateColor@SpinnerOption>:
    background_color: [0,0,0,1]   
    background_down: ''

<getDate> 
    # change the background color specifically for this view
    canvas.before:
        Color:
            rgba: 1,1,1,1

        Rectangle:
            pos: self.pos
            size: self.size

    MDBoxLayout:
        orientation:'vertical'
        MDBoxLayout:
            adaptive_height: True
            Button:
                text: "Calculator"
                on_press: root.manager.current = 'Calculator'
                background_color: 177/255, 199/255, 199/255,1
                
            Button:
                text: "Estimate \n Income"
                on_press: root.manager.current = 'estimate'
                background_color: 177/255, 199/255, 199/255,1
            Button:
                text: "Exchange"
                on_press: root.manager.current = 'Exchange'
                background_color: 177/255, 199/255, 199/255,1
            Button:
                text: "Date \nCalculator"
                on_press: root.manager.current = 'date'
                background_color: 177/255, 199/255, 199/255,1
        Label: 
            text: "Pick the mode"
            font_size: 50
            color: 0,0,0,1
            size_hint:1,.1
        MDGridLayout:
            md_bg_color: 1,1,1,1
            cols: 4
            size_hint: (1,.3)
            Label: 
                text: "Calculate dates"
                font_size: 50
                color: 0,0,0,1
            CheckBox:
                # this active will act as default option
                group: "Mode_options"
                # allow_no_selection ensure one check box always get picked
                allow_no_selection: False
                color: 0,0,0,1
                on_active: root.mode_marked(self, self.active, "calc")
            Label: 
                text: "Range date"
                font_size: 50
                color: 0,0,0,1
            CheckBox:
                group: "Mode_options"
                color: 0,0,0,1
                allow_no_selection: False
                on_active: root.mode_marked(self, self.active, "range")


        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1,.3
            Button:
                id: PickFromdate
                text: ""
                opacity: 0
                disabled: True
                background_color: [0,0,0, 1]  
                on_release: root.show_date_picker()
            
            Button:
                id: pickToDate
                text: ""
                opacity: 0
                disabled: True
                background_color: [0,0,0, 1]  
                on_release: root.show_date_picker_to()
            
        MDBoxLayout:
            id: add_1
            opacity: 0
            orientation: 'horizontal'
            adaptive_height: True
            Label:
                text: "Year"
                color: 0,0,0,1
            Label:
                text: "Month"
                color: 0,0,0,1
            Label:
                text: "Date"
                color: 0,0,0,1
                
        MDBoxLayout:
            id: add_2
            opacity: 0
            disabled: True
            orientation: 'horizontal'
            adaptive_height: True
            Spinner:
                id: year_input
                values:['0','1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99']
                text: '0'
                option_cls: Factory.get("DateColor")
                background_color: [0,0,0, 1]  
                # color: 1,0,0,1 this for the color font
            
            Spinner:
                id: month_input
                text:'0'
                values:['0','1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99']
                option_cls: Factory.get("DateColor")
                background_color: [0,0,0, 1]   

            Spinner: 
                id: day_input
                values:['0','1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99']
                text:'0'
                option_cls: Factory.get("DateColor")
                background_color: [0,0,0, 1]  

        Label:
            id: add_3
            opacity: 0
            text: "Add or Substract Date: "
            color: 0,0,0,1
            size_hint: 1,.2
        MDGridLayout:
            id: add_4
            opacity: 0
            disabled: True
            md_bg_color: 1,1,1,1
            cols: 4
            size_hint: (1,.1)
            Label: 
                text: "Add Dates"
                color: 0,0,0,1
                font_size: 50
            MDCheckbox:
                # Add Options
                # this active will act as default option
                active: True
                group: "addOrSub"
                color: 0,0,0,1
                allow_no_selection: False
                on_active: root.marked(self, self.active, "Add")
            Label: 
                text: "Subtract Dates"
                color: 0,0,0,1
                font_size: 50
            MDCheckbox:
                # Substract Options
                group: "addOrSub"
                color: 0,0,0,1
                allow_no_selection: False
                on_active: root.marked(self, self.active, "Substract")

        Label:
            id: SumDate
            color: 0,0,0,1
            text:""
        
        Button:
            text: "Calculate"
            size_hint: 1, .2
            background_color: 177/255, 199/255, 199/255,1
            on_release: root.getHowLong()